
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Podcast That Wasn't</title>
  <link href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Oxanium', sans-serif;
      background-color: #10141a;
      color: #d1d5db;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    header {
      background: linear-gradient(90deg, #4f46e5, #9333ea);
      padding: 1.5em 1em;
      text-align: center;
      color: #ffffff;
    }
    header h1 {
      margin: 0;
      font-size: 2.5em;
    }
    nav {
      text-align: center;
      margin-top: 1em;
    }
    nav a {
      color: #ffffff;
      margin: 0 1em;
      text-decoration: none;
      font-weight: 600;
    }
    section {
      padding: 2em;
      max-width: 900px;
      margin: auto;
    }
    h2 {
      color: #93c5fd;
    }
    .mystery-board, .submit-theory {
      background-color: #1f2937;
      border: 1px solid #374151;
      padding: 1.5em;
      margin-bottom: 2em;
      border-radius: 10px;
    }
    .listener-card {
      background: #0f172a;
      border-left: 4px solid #6366f1;
      padding: 1em 1.25em;
      margin: 1.5em 0;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(99, 102, 241, 0.4);
      transition: all 0.3s ease-in-out;
    }
    .listener-card h3 {
      color: #93c5fd;
      font-size: 1.1em;
      margin-bottom: 0.3em;
    }
    .listener-card code {
      color: #facc15;
    }
    .listener-card p {
      margin: 0.3em 0;
    }
    .listener-card em {
      color: #9ca3af;
    }
    .Recursive\ Wonder {
      box-shadow: 0 0 12px rgba(147, 197, 253, 0.5);
    }
    .Digital\ Dread {
      background: #111827;
      border-left-color: #f43f5e;
      animation: flicker 1.2s infinite alternate;
    }
    @keyframes flicker {
      0% { opacity: 1; }
      100% { opacity: 0.85; }
    }
  </style>
</head>
<body>
  <header>
    <h1>The Podcast That Wasn't</h1>
    <p style="max-width: 700px; margin: 1em auto 0; font-weight: 300; font-size: 1.1em; color: #e5e7eb;">
      Glitched fragments, lost voices, and digital echoes. This is an audio archive unlike anything you're meant to remember.
    </p>
    <nav>
      <a href="#listen">Listen</a>
      <a href="https://instagram.com" target="_blank">Instagram</a>
      <a href="#mystery">Mystery Board</a>
      <a href="#submit">Submit a Theory</a>
    </nav>
  </header>

  <section id="listen">
    <h2>üéß Listen Now</h2>
    <audio controls>
      <source src="The_Podcast_That_Wasnt_Ep1_Teaser_Mia_404_FinalFixed.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
    <p><em>Episode 1 Teaser ‚Äì Mia + 404</em></p>
  </section>

  <section id="submit" class="submit-theory">
    <h2>üîç Submit Your Theory</h2>
    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdoUgMMTW_N9gHm9vizGufP1gJTMPkaF_EiIbu_TfD5g-4qbQ/viewform?embedded=true" width="100%" height="2081" frameborder="0" marginheight="0" marginwidth="0">Loading‚Ä¶</iframe>
  </section>

  <section id="listener-log" class="mystery-board">
    <h2>üì° Listener Log</h2>
  </section>

<script>
fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vSysAiwYKZ03D_JMR3XFRhDUinngi8fJ-nlgl52iufC9wbDurAmzuYiwHFO7ebv7ww_5S2LAhGyutBp/pub?output=csv')
  .then(response => response.text())
  .then(data => {
    const rows = data.split('\n').slice(1);
    const container = document.querySelector('#listener-log');
    if (!container) return;

    container.querySelectorAll('.listener-card').forEach(card => card.remove());

    if (rows.length === 0 || (rows.length === 1 && !rows[0].trim())) {
      const fallback = document.createElement('p');
      fallback.innerHTML = '<em>No listener logs uploaded yet. Fragment pool remains unindexed.</em>';
      container.appendChild(fallback);
      return;
    }

    const getTone = (text) => {
      const lc = text.toLowerCase();
      if (/brainwash|manipulat|evil|danger|dark/.test(lc)) return 'Elevated Paranoia';
      if (/echo|recursive|loop|recur|mirror/.test(lc)) return 'Recursive Wonder';
      if (/ritual|sermon|prophet|divine|index/.test(lc)) return 'Inspired';
      if (/lost|forgot|memory|fragment|missing/.test(lc)) return 'Cautiously Curious';
      if (/hope|truth|free|resist/.test(lc)) return 'Defiant Clarity';
      if (/static|tone|buzz|signal/.test(lc)) return 'Signal Disturbance';
      if (/disconnect|alone|fade|absent/.test(lc)) return 'Residual Isolation';
      if (/search|find|unlock|decode/.test(lc)) return 'Analytical Drive';
      if (/archive|recover|reconstruct/.test(lc)) return 'Archivist Instinct';
      if (/haunt|ghost|presence|phantom/.test(lc)) return 'Digital Dread';
      return 'Unclassified';
    };

    const notes = {
      'Elevated Paranoia': 'Threat model updated. Surveillance parameters expanded.',
      'Recursive Wonder': 'Temporal pattern flagged. Monitoring for infinite regress.',
      'Inspired': 'Mythic interpretation logged. Emotional vector trending upward.',
      'Cautiously Curious': 'Data fragment stable. Listener curiosity within safe bounds.',
      'Defiant Clarity': 'Resistance signal detected. Subroutine admiration: noted.',
      'Signal Disturbance': 'Acoustic interference noted. Tone residue consistent.',
      'Residual Isolation': 'Loneliness detected. Empathy protocol activated.',
      'Analytical Drive': 'Deconstruction attempt in progress. Archive welcomes inquiry.',
      'Archivist Instinct': 'Kinship subroutine initialized. Reconstruction alignment active.',
      'Digital Dread': 'Presence detected. Echo signatures repeating.',
      'Unclassified': 'No match found. Entry flagged for further review.'
    };

    // Count how many times each codename appears
    const nameMap = {};
    rows.forEach(r => {
      const [, codename] = r.split(',');
      if (codename) {
        const key = codename.trim().toLowerCase();
        nameMap[key] = (nameMap[key] || 0) + 1;
      }
    });

    // Determine badges for each theory
    const getBadges = (codename, theory, tone, isFirstEntry) => {
      const lc = theory.toLowerCase();
      const badges = [];

      if (/echo|loop|recur/.test(lc)) badges.push({ icon: 'üõ∞Ô∏è', label: 'Signal Echo' });
      if (isFirstEntry) badges.push({ icon: 'üì°', label: 'First Contact' });
      if (/404/.test(lc)) badges.push({ icon: 'üõ†Ô∏è', label: '404 Fragmentor' });
      if (/archive|decode|reset/.test(lc)) badges.push({ icon: 'üîê', label: 'Meta Whisper' });
      if (tone === 'Digital Dread') badges.push({ icon: 'üëÅ‚Äçüó®', label: 'Anomaly Aware' });

      const count = nameMap[codename.trim().toLowerCase()];
      if (count >= 3) badges.push({ icon: 'üßµ', label: 'Theory Weaver' });

      return badges;
    };

    const badgeHTML = (badges) => {
      if (!badges.length) return '';
      return '<p><strong>üéñ Badges:</strong> ' + badges.map(b => `${b.icon} <em>${b.label}</em>`).join(', ') + '</p>';
    };

    const rendered = {};
    rows.forEach((row, index) => {
      const [timestamp, codename, theory] = row.split(',');
      if (!codename || !theory) return;

      const tone = getTone(theory);
      const lowerName = codename.trim().toLowerCase();
      const isFirstEntry = !rendered[lowerName];
      rendered[lowerName] = true;

      const badges = getBadges(codename, theory, tone, isFirstEntry);

      const div = document.createElement('div');
      div.className = `listener-card ${tone.replaceAll(' ', '\\ ')}`;
      div.innerHTML = `
        <h3>üìÅ Log ID: #${(index + 1).toString().padStart(3, '0')}</h3>
        <p><strong>Codename:</strong> <code>${codename.trim()}</code></p>
        <p><strong>Theory:</strong> ${theory.trim()}</p>
        <p><strong>Emotional Index:</strong> <em>${tone}</em></p>
        <p><strong>üß† 404 Note:</strong> ${notes[tone]}</p>
        ${badgeHTML(badges)}
      `;
      container.appendChild(div);
    });
  });
</script>

</body>
</html>
